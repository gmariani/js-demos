cv.controls.Carousel=function(a,b){this.autoAlpha=true;this.ease=gs.TweenLite.defaultEase;this.spacing=b||0;this.tweenTime=0.5;this.source=a;this.items=this.source.getElementsByTagName("li");this._align="CENTER";this._selected;this._selectedPrevious;this._index=0;this._tl;this._tweenObject={radian:0};this._move(0,1)};cv.controls.Carousel.VERSION=1;cv.controls.Carousel.prototype={getAlign:function(){return this._align},setAlign:function(a){switch(a){case"TOP":case"CENTER":case"BOTTOM":break;default:return}this._align=a},getSelected:function(){return this._selected},setSelected:function(a){selectItem(a)},getSelectedIndex:function(){return index},setSelectedIndex:function(a){selectIndex(a)},getSelectedPrevious:function(){return this._selectedPrevious},addEventListener:function(b,a){cv.Events.addEventListener(this.source,b,a)},removeEventListener:function(b,a){cv.Events.removeEventListener(this.source,b,a)},dispatchEvent:function(a){cv.Events.dispatchEvent(this.source,a)},update:function(){this.items=this.source.getElementsByTagName("li");this._render();this._render()},selectItem:function(f){var b,c=this.items.length,e,g,d=styles.get(f,"left"),a=styles.get(this._selected,"left");for(e=0;e<c;e++){if(this.items[e]===f){b=e;break}}if(d>a&&b>this._index){b=0-(c-b)}else{if(d<a&&b<this._index){b=b+c}}if(!isNaN(b)){g=this._abs(this._index-b);if(b>this._index){previous(g)}else{next(g)}return true}else{cv.trace("Carousel - Error: Can't find item");return false}},selectIndex:function(a){var c=this.items[a],b=this.items.length,d;if(c){if(c.style.left>this._selected.style.left&&a>this._index){a=0-(b-a)}else{if(c.style.left<this._selected.style.left&&a<this._index){a=a+b}}d=this._abs(this._index-a);if(a>this._index){previous(d)}else{next(d)}return true}else{cv.trace("Carousel - Error: Can't find item");return false}},next:function(a){this._move(a||1,1);this.dispatchEvent("change")},previous:function(a){this._move(a||1,-1);this.dispatchEvent("change")},_abs:function(a){return(a<0)?-a:a},_move:function(b,c){var a=b*(Math.PI*2/this.items.length);if(this._tl&&this._tl.active){this._tl.complete()}this._tl=gs.TweenLite.to(this._tweenObject,this.tweenTime,{radian:String(a*c),ease:this.ease,onComplete:this._render,onCompleteScope:this,onUpdate:this._render,onUpdateScope:this})},_render:function(){var m=this.items.length,r,b,f,s,o,a,n,c,k,d=(this.source.offsetWidth/2)+this.spacing,h=(this.source.offsetWidth/2),g=this.items[0]||null,p=NaN,e,l={left:g.style.left||g.offsetLeft,width:g.style.width||g.offsetWidth,height:g.style.height||g.offsetHeight},q=0,j=parseFloat(this._tweenObject.radian);if(m>0){while(m--){r=this.items[m];b={left:r.offsetLeft,width:r.offsetWidth,height:r.offsetHeight};a=b.left+(b.width/2);o=(Math.PI*2/this.items.length*m);c=d*Math.cos((o+j));f=(Math.PI*2/this.items.length*(m+1));s=d*Math.cos((f+j));k=((s-c)/2)-(b.width/2);r.style.left=h+c+k+"px";switch(this._align){case"TOP":q=0;break;case"CENTER":q=(this.source.offsetHeight-b.height)/2;break;case"BOTTOM":q=this.source.offsetHeight-b.height;break}r.style.top=q+"px";n=Math.sin((o+j));if(this.autoAlpha){cv.Styles.set(r,"opacity",n)}e=l.left+(l.width/2);if(r.style.visiblity=="visible"){if(this._abs(a-h)<this._abs(e-h)){g=r;l=b;p=m}else{if(g.style.visiblity=="hidden"){g=r;l=b;p=m;m=this.items.length}}}}}this._selectedPrevious=this._selected;this._selected=g;this._index=p}};